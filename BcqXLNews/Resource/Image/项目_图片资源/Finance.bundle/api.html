<html>
    <head>
        <title>Data API</title>
        <script type="text/javascript">
            
            eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('3(6 h!==\'x\'){h={}}(5(){\'1A 1B\';5 f(n){7 n<10?\'0\'+n:n}3(6 1n.9.y!==\'5\'){1n.9.y=5(o){7 17(m.1m())?m.1z()+\'-\'+f(m.1y()+1)+\'-\'+f(m.1C())+\'T\'+f(m.1M())+\':\'+f(m.1J())+\':\'+f(m.1K())+\'Z\':D};S.9.y=1L.9.y=1I.9.y=5(o){7 m.1m()}}B R=/[\\1D\\1q\\1k-\\1v\\1h\\1s\\1t\\1u-\\1l\\1g-\\15\\1f-\\1c\\1b\\18-\\1a]/g,N=/[\\\\\\"\\1H-\\1E\\1F-\\1G\\1q\\1k-\\1v\\1h\\1s\\1t\\1u-\\1l\\1g-\\15\\1f-\\1c\\1b\\18-\\1a]/g,8,G,19={\'\\b\':\'\\\\b\',\'\\t\':\'\\\\t\',\'\\n\':\'\\\\n\',\'\\f\':\'\\\\f\',\'\\r\':\'\\\\r\',\'"\':\'\\\\"\',\'\\\\\':\'\\\\\\\\\'},q;5 Q(p){N.1r=0;7 N.12(p)?\'"\'+p.L(N,5(a){B c=19[a];7 6 c===\'p\'?c:\'\\\\u\'+(\'1w\'+a.1x(0).W(16)).1p(-4)})+\'"\':\'"\'+p+\'"\'}5 I(o,A){B i,k,v,l,J=8,e,2=A[o];3(2&&6 2===\'x\'&&6 2.y===\'5\'){2=2.y(o)}3(6 q===\'5\'){2=q.V(A,o,2)}1Z(6 2){E\'p\':7 Q(2);E\'X\':7 17(2)?S(2):\'D\';E\'20\':E\'D\':7 S(2);E\'x\':3(!2){7\'D\'}8+=G;e=[];3(C.9.W.22(2)===\'[x 1V]\'){l=2.l;K(i=0;i<l;i+=1){e[i]=I(i,2)||\'D\'}v=e.l===0?\'[]\':8?\'[\\n\'+8+e.M(\',\\n\'+8)+\'\\n\'+J+\']\':\'[\'+e.M(\',\')+\']\';8=J;7 v}3(q&&6 q===\'x\'){l=q.l;K(i=0;i<l;i+=1){k=q[i];3(6 k===\'p\'){v=I(k,2);3(v){e.1e(Q(k)+(8?\': \':\':\')+v)}}}}Y{K(k 14 2){3(C.9.1d.V(2,k)){v=I(k,2);3(v){e.1e(Q(k)+(8?\': \':\':\')+v)}}}}v=e.l===0?\'{}\':8?\'{\\n\'+8+e.M(\',\\n\'+8)+\'\\n\'+J+\'}\':\'{\'+e.M(\',\')+\'}\';8=J;7 v}}3(6 h.P!==\'5\'){h.P=5(2,z,H){B i;8=\'\';G=\'\';3(6 H===\'X\'){K(i=0;i<H;i+=1){G+=\' \'}}Y 3(6 H===\'p\'){G=H}q=z;3(z&&6 z!==\'5\'&&(6 z!==\'x\'||6 z.l!==\'X\')){1o 1i 1N(\'h.P\')}7 I(\'\',{\'\':2})}}3(6 h.U!==\'5\'){h.U=5(w,11){B j;5 13(A,o){B k,v,2=A[o];3(2&&6 2===\'x\'){K(k 14 2){3(C.9.1d.V(2,k)){v=13(2,k);3(v!==1P){2[k]=v}Y{1Q 2[k]}}}}7 11.V(A,o,2)}w=S(w);R.1r=0;3(R.12(w)){w=w.L(R,5(a){7\'\\\\u\'+(\'1w\'+a.1x(0).W(16)).1p(-4)})}3(/^[\\],:{}\\s]*$/.12(w.L(/\\\\(?:["\\\\\\/21]|u[0-1R-1O-F]{4})/g,\'@\').L(/"[^"\\\\\\n\\r]*"|1W|1T|D|-?\\d+(?:\\.\\d*)?(?:[1S][+\\-]?\\d+)?/g,\']\').L(/(?:^|:|,)(?:\\s*\\[)+/g,\'\'))){j=1U(\'(\'+w+\')\');7 6 11===\'5\'?13({\'\':j},\'\'):j}1o 1i 1X(\'h.U\')}}3(!C.9.1j){C.9.1j=5(O){7 h.P(m,O)};C.9.1Y=5(O){7 h.U(m,O)}}}());',62,127,'||value|if||function|typeof|return|gap|prototype|||||partial|||JSON||||length|this||key|string|rep||||||text|object|toJSON|replacer|holder|var|Object|null|case||indent|space|str|mind|for|replace|join|escapable|filter|stringify|quote|cx|String||parse|call|toString|number|else|||reviver|test|walk|in|u202f||isFinite|ufff0|meta|uffff|ufeff|u206f|hasOwnProperty|push|u2060|u2028|u070f|new|toJSONString|u0600|u200f|valueOf|Date|throw|slice|u00ad|lastIndex|u17b4|u17b5|u200c|u0604|0000|charCodeAt|getUTCMonth|getUTCFullYear|use|strict|getUTCDate|u0000|x1f|x7f|x9f|x00|Boolean|getUTCMinutes|getUTCSeconds|Number|getUTCHours|Error|fA|undefined|delete|9a|eE|false|eval|Array|true|SyntaxError|parseJSON|switch|boolean|bfnrt|apply'.split('|'),0,{}))
            
            
            
            ;
            var TUtil={
                /*
                 * generate 0 prefixed string
                 * @param (Number) original number
                 * @return (String) 0 preffixed string
                 */
                s0:function(num){
                    num=parseInt(Number(num));
                    if(num<0)	return '';
                    if(num<10)	return '0'+String(num);
                    return String(num);
                },
                /*
                 * assistant func
                 * @param (Number) start
                 * @param (Number) end
                 * @return (Array)
                 */
                tIWS:function(start,end){
                    var timeArr=[];
                    for(var i=start;i<=end;i++){
                        timeArr.push(this.s0(i/60) +':'+ this.s0(i%60));
                    }
                    return timeArr;
                },
                /*
                 * generate the whole time range
                 * @param (Array) time range, input format example: [['9:30','11:30'],['13:00','15:00']]
                 * @return (Array) designated time range
                 */
                gtr:function(segArr_){
                    var _timeArray=[];
                    for(var hour,min,start,end,startNum,endNum,timeArr,i=0,l=segArr_.length;i<l;i++){
                        start=segArr_[i][0];
                        end=segArr_[i][1];
                        startNum=Number(start.split(':')[0])* 60+ Number(start.split(':')[1]);
                        endNum	=Number  (end.split(':')[0])* 60+ Number(end.split(':')[1]);
                        timeArr	=this.tIWS(startNum,endNum);
                        _timeArray=_timeArray.concat(timeArr);
                    }
                    return _timeArray;
                },
                /*
                 * get stock A trading range
                 * @return (Array) stock A trading time range
                 */
                tradingA:[],
                gta:function(){
                    if(!this.tradingA.length)this.tradingA=this.gtr([['9:30','11:30'],['13:00','15:00']]);
                    return this.tradingA;
                },
                /*
                 * get stock US trading range
                 * @return (Array) stock US trading time range
                 */
                tradingUs:[],
                gtus:function(){
                    if(!this.tradingUs.length)this.tradingUs=this.gtr([['9:30','16:00']]);
                    return this.tradingUs;
                },
                /*
                 * get trading clocktime arr based on stock type
                 * @param (String) stock type
                 * @return (Array) trading time arr
                 */
                gata:function(type_){
                    var arr;
                    switch(type_){
                        case 'US':
                        arr=this.gtus();
                        break;
                        default:
                        case 'CN':
                        arr=this.gta();
                        break;
                    }
                    return arr;
                },
                /*
                 * is the assigned stock on trading
                 * @param(String) stock type: CN, US, HK...
                 * @param(String) time string, formated as XX:XX
                 * @return(Boolean) is the stock on its trading time or not
                 */
                ist:function(type_,time_){
                    type_=type_.toUpperCase();
                    return this.gata(type_).indexOf(time_)>=0;
                },
                /*
                 * generate the vacant t datas
                 * @param (Number) days
                 * @param (Number) a price
                 * @param (Boolean) set the price and avg_price or not
                 * @param (String) stock type, cn us hk uk jp...
                 * @return (Array) imitated t data
                 */
                gltbt:function(days_,p_,onlyOne_,type_){
                    var datas=[];
                    var timeArr=this.gata(type_);
                    var len=timeArr.length;
                    for(var i=0,l=days_*len;i<l;i++){
                        datas.push({time:timeArr[i%len],price:0,percent:0,avg_price:0,volume:0});
                        if(!onlyOne_)datas[i].price=datas[i].avg_price=p_;
                    }
                    datas[0].price=datas[0].avg_price=datas[0].prevclose=p_;
                    datas[0].volume=datas[0].totalVolume=datas[0].totalAmount=0;
                    return datas;
                },
                /*
                 * append clocktime to data
                 * @param (Array) t data
                 * @param (String) stock type
                 * @return (Array) t data with clock time
                 */
                azft:function(datas_,type_){
                    if(!datas_)return datas_;
                    var timeArr=this.gata(type_);
                    for(var i=0,l=datas_.length;i<l;i++)datas_[i].time=timeArr[i];
                    datas_[0].date.setHours(0);//set the hour in the [0] same as the loaded data from server
                    return datas_;
                },
                /*
                 * convert char to base64 index
                 * @param(String) original char
                 * @return(Number) base64 index
                 */
                c2b:function(a_){
                    a_=a_.replace(' ','+');
                    var b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.indexOf(a_);
                    return b>=0?b:0;
                },
                /*
                 * decode the base64 data
                 * @param(String) base64 string
                 * @return(Array) decoded data
                 */
                db:function(s_){
                    if(!s_)return [];
                    var r=[];
                    for(var c,p,b=0,l=0,i=0,len=s_.length;i<len;i++){
                        c=this.c2b(s_.charAt(i));
                        p=(l & 6) ? ((l & 7) ^ 7) : 5;
                        b |= c >> (5 - p) << ((l ^ 7) - p);
                        if(l>25){
                            l-=32;
                            r[r.length]=b;
                            b=0;
                        }
                        b |= (c & ((1 << (5 - p)) - 1)) << ((l | 7) + 4 + p);
                        l += 6;
                    }
                    return r;
                },
                /*
                 * generate working datas from raw base64 data
                 * @param(Array) raw base64 data
                 * @param(Boolean) indicates whether the data is for comparing or not
                 * @param(String) indicates the type of stock
                 * @return(Array) formated data array
                 */
                fB:function(b64Arr_,isCompare_,type_){
                    var datas=[];
                    var timeArr=this.gata(type_),len=timeArr.length*3;
                    var totalAmount=0,totalVolume=0,lastAvgPrice;
                    for(var index=0,i=0;i<len;i+=3){
                        index=Math.floor(i/3);
                        if(isCompare_){
                            datas[datas.length]={time:timeArr[index],	price:b64Arr_[i+1]/1000};
                        }else{
                            //if(b64Arr_[i]>0)b64Arr_[i]=Math.round(b64Arr_[i]/=10)*10;
                            //console.log('avg:',b64[i],'p:',b64[i + 1]);
                            datas[datas.length]={time:timeArr[index],	avg_price:b64Arr_[i]/1000, price:b64Arr_[i+1]/1000, volume:b64Arr_[i+2]/100};
                            if(datas[index].volume>0)totalVolume+=datas[index].volume;
                            if(datas[index].avg_price>0)lastAvgPrice=datas[index].avg_price;
                        }
                    }
                    if(datas[0].price<0)datas[0].price=datas[0].avg_price=totalVolume=totalAmount=0;
                    if(!isCompare_){
                        datas[0].totalVolume=totalVolume;
                        datas[0].totalAmount=totalVolume*lastAvgPrice;
                    }
                    return datas;
                }
            };

            
            //hxx:S_KLC_D 2012.6.19:
            //day->date
            function S_KLC_D(e){var r,f=arguments,i,d,v,n,c,l,u,t=864e5,o=7657,a=[],p=[],_=~(3<<30),s=1<<30,m=[0,3,5,6,9,10,12,15,17,18,20,23,24,27,29,30],h=Math,b=function(){var f,n;for(f=0;f<64;f++){p[f]=h.pow(2,f);if(f<26){a[f]=k(f+65);a[f+26]=k(f+97);if(f<10){a[f+52]=k(f+48)}}}a.push("+","/");a=a.join("");i=e.split("");d=i.length;for(f=0;f<d;f++){i[f]=a.indexOf(i[f])}v={};r=l=0;c={};n=C([12,6]);u=63^n[1];return{_1479:j,_136:S,_200:D,_139:y}["_"+n[0]]||function(){return[]}},k=String.fromCharCode,g=function(e){return e==={}._},w=function(){var e,r;e=x();r=1;for(;;){if(x()){r++}else{return r*(e*2-1)}}},x=function(){var e;if(r>=d){return 0}e=i[r]&1<<l;l++;if(l>=6){l-=6;r++}return!!e},C=function(e,f,v){var n,c,u,t,o;c=[];u=0;if(!f){f=[]}if(!v){v=[]}for(n=0;n<e.length;n++){t=e[n];u=0;if(!t){c[n]=0;continue}if(r>=d){return c}if(e[n]<=0){u=0}else if(e[n]<=30){for(;;){o=6-l;o=o<t?o:t;u|=(i[r]>>l&(1<<o)-1)<<e[n]-t;l+=o;if(l>=6){l-=6;r++}t-=o;if(t<=0){break}}if(f[n]&&u>=p[e[n]-1]){u-=p[e[n]]}}else{u=C([30,e[n]-30],[0,f[n]]);if(!v[n]){u=u[0]+u[1]*p[30]}}c[n]=u}return c},z=function(e){var r,f,i;if(e>1){r=0}for(r=0;r<e;r++){v.d++;i=v.d%7;if(i==3||i==4){v.d+=5-i}}f=new Date;f.setTime((o+v.d)*t);return f},D=function(){var e,f,i,n,c,l;if(u>=1){return[]}v.d=C([18],[1])[0]-1;n=C([3,3,30,6]);v.p=n[0];v.ld=n[1];v.cd=n[2];v.c=n[3];v.m=h.pow(10,v.p);v.pc=v.cd/v.m;i=[];for(e=0;;e++){c={d:1};if(x()){n=C([3])[0];if(n==0){c.d=C([6])[0]}else if(n==1){v.d=C([18])[0];c.d=0}else{c.d=n}}l={date:z(c.d)};if(x()){v.ld+=w()}n=C([v.ld*3],[1]);v.cd+=n[0];l.close=v.cd/v.m;i.push(l);if(r>=d||r==d-1&&!((v.c^e+1)&63)){break}}i[0].prevclose=v.pc;return i},S=function(){var e,f,i,n,c,l,t,o,a,p,_;if(u>=2){return[]}t=[];a={v:"volume",p:"price",a:"avg_price"};v.d=C([18],[1])[0]-1;o={date:z(1)};i=C(u<1?[3,3,4,1,1,1,5]:[4,4,4,1,1,1,3]);for(e=0;e<7;e++){v[["la","lp","lv","tv","rv","zv","pp"][e]]=i[e]}v.m=h.pow(10,v.pp);if(u>=1){i=C([3,3]);v.c=i[0];i=i[1]}else{i=5;v.c=2}v.pc=C([i*6])[0];o.pc=v.pc/v.m;v.cp=v.pc;v.da=0;v.sa=v.sv=0;for(e=0;;e++){if(r>=d||r==d-1&&!((v.c^e)&7)){break}c={};n={};p=v.tv?x():1;for(f=0;f<3;f++){_=["v","p","a"][f];if(p?x():0){i=w();v["l"+_]+=i}l=_=="v"&&v.rv?x():1;i=C([v["l"+_]*3+(_=="v"?l*7:0)],[!!f])[0]*(l?1:100);n[_]=i;if(_=="v"){if(!(c[a[_]]=i)&&e<241&&(v.zv?!x():1)){n["p"]=0;break}}else if(_=="a"){v.da=(u<1?0:v.da)+n["a"]}}v.sv+=n["v"];c[a["p"]]=(v.cp+=n["p"])/v.m;v.sa+=n["v"]*v.cp;c[a["a"]]=g(n["a"])?e?t[e-1][a["a"]]:c[a["p"]]:v.sv?((h.floor((v.sa*(2e3/v.m)+v.sv)/v.sv)>>1)+v.da)/1e3:c[a["p"]]+v.da/1e3;t.push(c)}t[0].date=o.date;t[0].prevclose=o.pc;return t},j=function(){var e,r,f,i,d,n,c,l;if(u>=1){return[]}v.lv=0;v.ld=0;v.cd=0;v.cv=[0,0];v.p=C([6])[0];v.d=C([18],[1])[0]-1;v.m=h.pow(10,v.p);n=C([3,3]);v.md=n[0];v.mv=n[1];e=[];for(;;){n=C([6]);if(!n.length){break}i={c:n[0]};d={};i.d=1;if(i.c&32){for(;;){n=C([6])[0];if((n|16)==63){l=n&16?"x":"u";n=C([3,3]);i[l+"_d"]=n[0]+v.md;i[l+"_v"]=n[1]+v.mv;break}else if(n&32){c=n&8?"d":"v";l=n&16?"x":"u";i[l+"_"+c]=(n&7)+v["m"+c];break}else{c=n&15;if(c==0){i.d=C([6])[0]}else if(c==1){v.d=c=C([18])[0];i.d=0}else{i.d=c}if(!(n&16)){break}}}}d.date=z(i.d);for(c in{v:0,d:0}){if(!g(i["x_"+c])){v["l"+c]=i["x_"+c]}if(g(i["u_"+c])){i["u_"+c]=v["l"+c]}}i.l_l=[i.u_d,i.u_d,i.u_d,i.u_d,i.u_v];l=m[i.c&15];if(i.u_v&1){l=31-l}if(i.c&16){i.l_l[4]+=2}for(f=0;f<5;f++){if(l&1<<4-f){i.l_l[f]++}i.l_l[f]*=3}i.d_v=C(i.l_l,[1,0,0,1,1],[0,0,0,0,1]);c=v.cd+i.d_v[0];d.open=c/v.m;d.high=(c+i.d_v[1])/v.m;d.low=(c-i.d_v[2])/v.m;d.close=(c+i.d_v[3])/v.m;n=i.d_v[4];if(typeof n=="number"){n=[n,n>=0?0:-1]}v.cd=c+i.d_v[3];l=v.cv[0]+n[0];v.cv=[l&_,v.cv[1]+n[1]+!!((v.cv[0]&_)+(n[0]&_)&s)];d.volume=(v.cv[0]&s-1)+v.cv[1]*s;e.push(d)}return e},y=function(){var e,r,f,i;if(u>1){return[]}v.l=0;i=-1;v.d=C([18])[0]-1;f=C([18])[0];while(v.d<f){r=z(1);if(i<=0){if(x()){v.l+=w()}i=C([v.l*3],[0])[0]+1;if(!e){e=[r];i--}}else{e.push(r)}i--}return e};return b()()}
            
            function api_b64decode(key){
            
                var data = window[key];
                
                data = TUtil.fB(TUtil.db(data),false,'CN');
                
                delete window[key];
                
                return JSON.stringify(data);
            }
            
            function api_decode(text){
                
                var data = S_KLC_D(text);
                
                delete text;

                return JSON.stringify(data);
            }
            
            function api_status(){
                return "OK";
            }
            
            </script>
    </head>
    <body>
    </body>
</html>
